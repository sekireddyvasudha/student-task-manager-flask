<!DOCTYPE html>
<html>
<head>
  <title>Student Task Manager</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet">

</head>

<body class="bg-light">

<nav class="navbar navbar-dark bg-dark px-3">
  <span class="navbar-brand">
    ðŸŽ¯ Student Task Manager
  </span>

  <span class="text-white">
    Logged in as <b>{{ session.name }}</b> ({{ session.role }})
  </span>

  <a class="btn btn-outline-light btn-sm" href="/logout">Logout</a>
</nav>


<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center">
    <h4 class="fw-bold">My Tasks</h4>

    <a class="btn btn-primary" href="/add">
      âž• Add New Task
    </a>
  </div>


  <!-- Filters -->
  <div class="card mt-3 p-3 shadow-sm">

    <form method="GET" action="/" class="row g-2">

      <div class="col-md-3">
        <input class="form-control"
               name="search"
               value="{{ request.args.get('search','') }}"
               placeholder="ðŸ” Search tasks">
      </div>

      <div class="col-md-2">
        <select class="form-select" name="status">
          <option>All</option>
          <option>Pending</option>
          <option>In-Progress</option>
          <option>Completed</option>
        </select>
      </div>

      <div class="col-md-2">
        <select class="form-select" name="priority">
          <option>All</option>
          <option>Low</option>
          <option>Medium</option>
          <option>High</option>
        </select>
      </div>

      <div class="col-md-2">
        <input type="date"
               class="form-control"
               name="deadline"
               value="{{ request.args.get('deadline','') }}">
      </div>

      <div class="col-md-3">
        <button class="btn btn-dark">Apply Filters</button>
        <a class="btn btn-outline-secondary" href="/">Reset</a>
      </div>

    </form>
  </div>


  <!-- Task Table -->
  <div class="card mt-3 shadow-sm">

    <table class="table table-striped table-hover mb-0">

      <thead class="table-dark">
        <tr>
          <th>Title</th>
          <th>Status</th>
          <th>Priority</th>
          <th>Deadline</th>
          <th>Updated</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>

      {% for task in tasks %}
      <tr>

        <td class="fw-semibold">{{ task.title }}</td>

        <td>
          {% if task.status == 'Pending' %}
            <span class="badge bg-warning text-dark">Pending</span>

          {% elif task.status == 'In-Progress' %}
            <span class="badge bg-primary">In Progress</span>

          {% else %}
            <span class="badge bg-success">Completed</span>
          {% endif %}
        </td>

        <td>
          {% if task.priority == 'High' %}
            <span class="badge bg-danger">High</span>
          {% elif task.priority == 'Medium' %}
            <span class="badge bg-info text-dark">Medium</span>
          {% else %}
            <span class="badge bg-secondary">Low</span>
          {% endif %}
        </td>

        <td>{{ task.deadline }}</td>
        <td>{{ task.updated_at }}</td>

        <td>
          <a class="btn btn-sm btn-outline-dark" href="/view/{{ task.id }}">View</a>
          <a class="btn btn-sm btn-outline-primary" href="/edit/{{ task.id }}">Edit</a>
          <a class="btn btn-sm btn-outline-danger" href="/delete/{{ task.id }}">Delete</a>
        </td>

      </tr>
      {% endfor %}

      </tbody>

    </table>
  </div>

</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
